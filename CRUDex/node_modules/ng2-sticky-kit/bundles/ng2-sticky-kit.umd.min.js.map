{"version":3,"file":"ng2-sticky-kit.umd.min.js","sources":["../../out-tsc/lib/src/component/sticky.component.ts","../../out-tsc/lib/src/module.ts"],"sourcesContent":["import {Component, ElementRef, Input, Output, EventEmitter, OnInit, AfterViewInit, HostListener} from '@angular/core';\nexport class StickyComponent implements OnInit, AfterViewInit {\n\n     zIndex: number = 10;\n     width: string = 'auto';\n     offsetTop: number = 0;\n     offsetBottom: number = 0;\n     start: number = 0;\n     stickClass: string = 'sticky';\n     endStickClass: string = 'sticky-end';\n     mediaQuery: string = '';\n     parentMode: boolean = true;\n     orientation: string = 'none';\n\n     activated = new EventEmitter();\n     deactivated = new EventEmitter();\n     reset = new EventEmitter();\nprivate isStuck: boolean = false;\nprivate elem: any;\nprivate container: any;\nprivate originalCss: any;\nprivate windowHeight: number;\nprivate containerHeight: number;\nprivate elemHeight: number;\nprivate containerStart: number;\nprivate scrollFinish: number;\n/**\n * @param {?} element\n */\nconstructor(private element: ElementRef) { }\n/**\n * @return {?}\n */\nngOnInit(): void {\n        this.elem = this.element.nativeElement;\n    }\n/**\n * @return {?}\n */\nngAfterViewInit(): void {\n        // define scroll container as parent element\n        this.container = this.elem.parentNode;\n        this.defineOriginalDimensions();\n        this.sticker();\n    }\n/**\n * @return {?}\n */\nonChange(): void {\n        this.sticker();\n    }\n/**\n * @return {?}\n */\ndefineOriginalDimensions(): void {\n        this.originalCss = {\n            zIndex: this.getCssValue(this.elem, 'zIndex'),\n            position: this.getCssValue(this.elem, 'position'),\n            top: this.getCssValue(this.elem, 'top'),\n            right: this.getCssValue(this.elem, 'right'),\n            left: this.getCssValue(this.elem, 'left'),\n            bottom: this.getCssValue(this.elem, 'bottom'),\n            width: this.getCssValue(this.elem, 'width'),\n        };\n\n        if (this.width == 'auto') {\n            this.width = this.originalCss.width;\n        }\n    }\n/**\n * @return {?}\n */\ndefineDimensions(): void {\n        let /** @type {?} */ containerTop: number = this.getBoundingClientRectValue(this.container, 'top');\n        this.windowHeight = window.innerHeight;\n        this.elemHeight = this.getCssNumber(this.elem, 'height');\n        this.containerHeight = this.getCssNumber(this.container, 'height');\n        this.containerStart = containerTop + this.scrollbarYPos() - this.offsetTop + this.start;\n        if (this.parentMode) {\n            this.scrollFinish = this.containerStart - this.start - this.offsetBottom + (this.containerHeight - this.elemHeight);\n        } else {\n            this.scrollFinish = document.body.offsetHeight;\n        }\n    }\n/**\n * @return {?}\n */\nresetElement(): void {\n        this.elem.classList.remove(this.stickClass);\n        Object.assign(this.elem.style, this.originalCss);\n\n        this.reset.next(this.elem);\n    }\n/**\n * @return {?}\n */\nstuckElement(): void {\n        this.isStuck = true;\n\n        this.elem.classList.remove(this.endStickClass);\n        this.elem.classList.add(this.stickClass);\n\n        Object.assign(this.elem.style, {\n            zIndex: this.zIndex,\n            position: 'fixed',\n            top: this.offsetTop + 'px',\n            right: 'auto',\n            bottom: 'auto',\n            left: this.getBoundingClientRectValue(this.elem, 'left') + 'px',\n            width: this.width\n        });\n\n        this.activated.next(this.elem);\n    }\n/**\n * @return {?}\n */\nunstuckElement(): void {\n        this.isStuck = false;\n\n        this.elem.classList.add(this.endStickClass);\n\n        this.container.style.position = 'relative';\n\n        Object.assign(this.elem.style, {\n            position: 'absolute',\n            top: 'auto',\n            left: 'auto',\n            right: this.getCssValue(this.elem, 'float') === 'right' || this.orientation === 'right' ? 0 : 'auto',\n            bottom: this.offsetBottom + 'px',\n            width: this.width\n        });\n\n        this.deactivated.next(this.elem);\n    }\n/**\n * @return {?}\n */\nmatchMediaQuery(): any {\n        if (!this.mediaQuery) return true;\n        return (\n            window.matchMedia('(' + this.mediaQuery + ')').matches ||\n            window.matchMedia(this.mediaQuery).matches\n        );\n    }\n/**\n * @return {?}\n */\nsticker(): void {\n\n        // check media query\n        if (this.isStuck && !this.matchMediaQuery()) {\n            this.resetElement();\n            return;\n        }\n\n        // detecting when a container's height changes\n        let /** @type {?} */ currentContainerHeight: number = this.getCssNumber(this.container, 'height');\n        if (currentContainerHeight !== this.containerHeight) {\n            this.defineDimensions();\n        }\n\n        // check if the sticky element is above the container\n        if (this.elemHeight >= currentContainerHeight) {\n          return;\n        }\n\n        let /** @type {?} */ position: number = this.scrollbarYPos();\n\n        // unstick\n        if (this.isStuck && (position < this.containerStart || position > this.scrollFinish) || position > this.scrollFinish) {\n            this.resetElement();\n            if (position > this.scrollFinish) this.unstuckElement();\n            this.isStuck = false;\n        }\n        // stick\n        else if (this.isStuck === false && position > this.containerStart && position < this.scrollFinish) {\n            this.stuckElement();\n        }\n    }\n/**\n * @return {?}\n */\nprivate scrollbarYPos(): number {\n        return window.pageYOffset || document.documentElement.scrollTop;\n    }\n/**\n * @param {?} element\n * @param {?} property\n * @return {?}\n */\nprivate getBoundingClientRectValue(element: any, property: string): number {\n        let /** @type {?} */ result = 0;\n        if (element && element.getBoundingClientRect) {\n            let /** @type {?} */ rect = element.getBoundingClientRect();\n            result = (typeof rect[property] !== 'undefined') ? rect[property] : 0;\n        }\n        return result;\n    }\n/**\n * @param {?} element\n * @param {?} property\n * @return {?}\n */\nprivate getCssValue(element: any, property: string): any {\n        let /** @type {?} */ result: any = '';\n        if (typeof window.getComputedStyle !== 'undefined') {\n            result = window.getComputedStyle(element, '').getPropertyValue(property);\n        }\n        else if (typeof element.currentStyle !== 'undefined')  {\n            result = element.currentStyle[property];\n        }\n        return result;\n    }\n/**\n * @param {?} element\n * @param {?} property\n * @return {?}\n */\nprivate getCssNumber(element: any, property: string): number {\n        if (typeof element === 'undefined') return 0;\n        return parseInt(this.getCssValue(element, property), 10) || 0;\n    }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n    selector: 'sticky',\n    template: '<ng-content></ng-content>'\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'zIndex': [{ type: Input, args: ['sticky-zIndex', ] },],\n'width': [{ type: Input, args: ['sticky-width', ] },],\n'offsetTop': [{ type: Input, args: ['sticky-offset-top', ] },],\n'offsetBottom': [{ type: Input, args: ['sticky-offset-bottom', ] },],\n'start': [{ type: Input, args: ['sticky-start', ] },],\n'stickClass': [{ type: Input, args: ['sticky-class', ] },],\n'endStickClass': [{ type: Input, args: ['sticky-end-class', ] },],\n'mediaQuery': [{ type: Input, args: ['sticky-media-query', ] },],\n'parentMode': [{ type: Input, args: ['sticky-parent', ] },],\n'orientation': [{ type: Input, args: ['sticky-orientation', ] },],\n'activated': [{ type: Output },],\n'deactivated': [{ type: Output },],\n'reset': [{ type: Output },],\n'onChange': [{ type: HostListener, args: ['window:scroll', ['$event'], ] },{ type: HostListener, args: ['window:resize', ['$event'], ] },{ type: HostListener, args: ['window:orientationchange', ['$event'], ] },],\n};\n}\n\nfunction StickyComponent_tsickle_Closure_declarations() {\n/** @type {?} */\nStickyComponent.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nStickyComponent.ctorParameters;\n/** @type {?} */\nStickyComponent.propDecorators;\n/** @type {?} */\nStickyComponent.prototype.zIndex;\n/** @type {?} */\nStickyComponent.prototype.width;\n/** @type {?} */\nStickyComponent.prototype.offsetTop;\n/** @type {?} */\nStickyComponent.prototype.offsetBottom;\n/** @type {?} */\nStickyComponent.prototype.start;\n/** @type {?} */\nStickyComponent.prototype.stickClass;\n/** @type {?} */\nStickyComponent.prototype.endStickClass;\n/** @type {?} */\nStickyComponent.prototype.mediaQuery;\n/** @type {?} */\nStickyComponent.prototype.parentMode;\n/** @type {?} */\nStickyComponent.prototype.orientation;\n/** @type {?} */\nStickyComponent.prototype.activated;\n/** @type {?} */\nStickyComponent.prototype.deactivated;\n/** @type {?} */\nStickyComponent.prototype.reset;\n/** @type {?} */\nStickyComponent.prototype.isStuck;\n/** @type {?} */\nStickyComponent.prototype.elem;\n/** @type {?} */\nStickyComponent.prototype.container;\n/** @type {?} */\nStickyComponent.prototype.originalCss;\n/** @type {?} */\nStickyComponent.prototype.windowHeight;\n/** @type {?} */\nStickyComponent.prototype.containerHeight;\n/** @type {?} */\nStickyComponent.prototype.elemHeight;\n/** @type {?} */\nStickyComponent.prototype.containerStart;\n/** @type {?} */\nStickyComponent.prototype.scrollFinish;\n/** @type {?} */\nStickyComponent.prototype.element;\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { NgModule } from '@angular/core';\n\nimport { StickyComponent } from './component/sticky.component';\nexport class StickyModule { static decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n  declarations: [StickyComponent],\n  exports: [StickyComponent]\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction StickyModule_tsickle_Closure_declarations() {\n/** @type {?} */\nStickyModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nStickyModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"],"names":["element","this","EventEmitter","StickyComponent","elem","nativeElement","container","parentNode","defineOriginalDimensions","sticker","originalCss","zIndex","getCssValue","position","top","right","left","bottom","width","containerTop","getBoundingClientRectValue","windowHeight","window","innerHeight","elemHeight","getCssNumber","containerHeight","containerStart","scrollbarYPos","offsetTop","start","parentMode","scrollFinish","offsetBottom","document","body","offsetHeight","classList","remove","stickClass","Object","assign","style","reset","next","isStuck","endStickClass","add","activated","orientation","deactivated","mediaQuery","matchMedia","matches","matchMediaQuery","currentContainerHeight","defineDimensions","resetElement","unstuckElement","stuckElement","pageYOffset","documentElement","scrollTop","property","result","getBoundingClientRect","rect","getComputedStyle","getPropertyValue","currentStyle","parseInt","type","Component","args","selector","template","ElementRef","Input","Output","onChange","HostListener","NgModule","declarations","exports","StickyModule"],"mappings":"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"}